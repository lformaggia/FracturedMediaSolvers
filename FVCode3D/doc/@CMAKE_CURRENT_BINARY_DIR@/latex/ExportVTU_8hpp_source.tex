\hypertarget{ExportVTU_8hpp_source}{}\section{Export\+V\+T\+U.\+hpp}
\label{ExportVTU_8hpp_source}\index{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/export/\+Export\+V\+T\+U.\+hpp@{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/export/\+Export\+V\+T\+U.\+hpp}}

\begin{DoxyCode}
00001 
00006 \textcolor{preprocessor}{#ifndef EXPORTVTU\_HPP\_}
00007 \textcolor{preprocessor}{#define EXPORTVTU\_HPP\_}
00008 
00009 \textcolor{preprocessor}{#include <\hyperlink{Export_8hpp}{FVCode3D/export/Export.hpp}>}
00010 
00011 \textcolor{keyword}{namespace }\hyperlink{namespaceFVCode3D}{FVCode3D}
00012 \{
00013 
00015 
\hypertarget{ExportVTU_8hpp_source.tex_l00019}{}\hyperlink{classFVCode3D_1_1ExporterVTU}{00019} \textcolor{keyword}{class }\hyperlink{classFVCode3D_1_1ExporterVTU}{ExporterVTU} : \textcolor{keyword}{public} \hyperlink{classFVCode3D_1_1Exporter}{Exporter}
00020 \{
00021 \textcolor{keyword}{public}:
00022 
00024     \hyperlink{classFVCode3D_1_1ExporterVTU_a0e467b067b3cff3c1b563dda84794818}{ExporterVTU}() = \textcolor{keywordflow}{default};
00025 
00027 
00031     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a8e5eff8e388cf6de1bf1c1deca863ac7}{exportMesh}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00032 
00034 
00038     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_ac043bd93a6a079f864bc1b76a21df6a2}{exportTetrahedralMesh}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string 
      filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00039 
00041 
00045     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_abdb2e3f36907610720d698d9bfa9428d}{exportFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{
      const} \textcolor{keywordflow}{throw}();
00046 
00048 
00052     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a5af587a4d971f4d41caecbef3477211b}{exportMeshWithFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} 
      std::string filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00053 
00055 
00059     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a672c00cd380554714d09d5d9b0b56a24}{exportWireframe}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{
      const} \textcolor{keywordflow}{throw}();
00060 
00062 
00066     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a3ee8f96689d31f85372b580caffdcc7e}{exportEdges}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{
      const} \textcolor{keywordflow}{throw}();
00067 
00069 
00073     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a15e1d2e6940ac0a37bf3c4d0ee5dc4d5}{exportFacets}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{
      const} \textcolor{keywordflow}{throw}();
00074 
00076 
00080     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_aef7601095b83f975d009f9cb68563ae4}{exportFractureJunctures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} 
      std::string filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00081 
00083 
00087     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a95853064ccbdab9ab24b3aa6f67ff19c}{exportFractureTips}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string 
      filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00088 
00090 
00097     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00098     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{exportSolutionOnFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string 
      filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Pressure"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00099 
00101 
00108     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00109     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a476a1dd02bcba8c31f0d99c7106d0c21}{exportSolution}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{const} 
      VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Pressure"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00110 
00112 
00119     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00120     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{exportSolutionOnFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} 
      std::string filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Pressure"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00121 
00123 
00129     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00130     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a3dd6650210988750d8c057f68a0f016d}{exportSolutionOnFacets}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string 
      filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Transmissibility"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00131 
00133 
00140     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00141     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a8e6ee7a5a2bede11d9671d37e78651a4}{exportFlux}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{const} 
      VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Flux"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00142 
00144 
00151     \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00152     \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a1bca940b11053faa1a928bf3b19709af}{exportFluxOnFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string 
      filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName = \textcolor{stringliteral}{"Flux"}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00153 
00155 
00162     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a12240c4de9e7b3a5bf8f513c873c4547}{exportWithProperties}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} 
      \hyperlink{classFVCode3D_1_1PropertiesMap}{PropertiesMap} & properties, \textcolor{keyword}{const} std::string filename,
00163         \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a17a9cb86e2e25bbfbfcb645a2eec1d64}{Flag16bit} propertiesType, \textcolor{keyword}{const} std::vector<Real> * property = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}(
      );
00164 
00166 
00171     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a12240c4de9e7b3a5bf8f513c873c4547}{exportWithProperties}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} 
      \hyperlink{classFVCode3D_1_1PropertiesMap}{PropertiesMap} & properties, \textcolor{keyword}{const} std::string filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}();
00172 
00174 
00180     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a12240c4de9e7b3a5bf8f513c873c4547}{exportWithProperties}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} 
      std::string filename,
00181         \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a17a9cb86e2e25bbfbfcb645a2eec1d64}{Flag16bit} propertiesType, \textcolor{keyword}{const} std::vector<Real> * property = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}(
      );
00182 
00184     \textcolor{keyword}{virtual} \hyperlink{classFVCode3D_1_1ExporterVTU_a50483218cd7944d4b421156a1e534c32}{~ExporterVTU}() = \textcolor{keywordflow}{default};
00185 \};
00186 
00187 \textcolor{comment}{/*----------------*/}
00188 \textcolor{comment}{/* IMPLEMENTATION */}
00189 \textcolor{comment}{/*----------------*/}
00190 
00191 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
\hypertarget{ExportVTU_8hpp_source.tex_l00192}{}\hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{00192} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{ExporterVTU::exportSolutionOnFractures}(\textcolor{keyword}{const} 
      \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName) \textcolor{keyword}{
      const} \textcolor{keywordflow}{throw}()
00193 \{
00194     std::fstream filestr;
00195 
00196     filestr.open (filename.c\_str(), std::ios\_base::out);
00197 
00198     \textcolor{keywordflow}{if} (filestr.is\_open())
00199     \{
00200         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00201     \}
00202     \textcolor{keywordflow}{else}
00203     \{
00204         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00205     \}
00206 
00207     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Solution on Fractures in Vtu format... "} << std::endl;
00208 
00209     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00210     \textcolor{keyword}{const} std::map<UInt,Facet3D> & facets = mesh.getFacetsMap();
00211     \textcolor{keyword}{const} std::vector<Fracture3D> & fractures = mesh.getFN().getNetwork();
00212     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00213     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nCells = 0;
00214     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0;
00215 
00216     \textcolor{keywordflow}{for}(std::vector<Fracture3D>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it)
00217         nCells += it->getNumberOfFractureFacets();
00218 
00219     \textcolor{comment}{// Header}
00220     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00221     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00222     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00223     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << nCells << \textcolor{stringliteral}{"\(\backslash\)">"} << 
      std::endl;
00224 
00225     \textcolor{comment}{// CellData}
00226     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)">"} << std::endl;
00227     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00228     filestr << std::scientific << std::setprecision(10);
00229     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i = 0; i < nCells; ++i )
00230         filestr << static\_cast<Real>(sol[i]) << std::endl;
00231     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00232     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00233 
00234     filestr << std::scientific << std::setprecision(10);
00235 
00236     \textcolor{comment}{// Points}
00237     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00238     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00239     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00240         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00241     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00242     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00243 
00244     \textcolor{comment}{// Cells}
00245     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00246     \textcolor{comment}{//  Connectivity}
00247     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00248     \textcolor{keywordflow}{for}(std::vector<Fracture3D>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00249     \{
00250         \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < it->getNumberOfFractureFacets(); ++i)
00251         \{
00252             \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = facets.at(it->getFractureFacetsId()[i]).
      getVerticesVector().begin(); jt != facets.at(it->getFractureFacetsId()[i]).getVerticesVector().end()-1; ++jt )
00253                 filestr << *jt << \textcolor{stringliteral}{" "};
00254             filestr << *(facets.at(it->getFractureFacetsId()[i]).getVerticesVector().rbegin()) << std::endl
      ;
00255         \}
00256     \}
00257     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00258 
00259     \textcolor{comment}{//  Offsets}
00260     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00261     \textcolor{keywordflow}{for}(std::vector<Fracture3D>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00262     \{
00263         \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < it->getNumberOfFractureFacets(); ++i)
00264         \{
00265             offsets += facets.at(it->getFractureFacetsId()[i]).getNumberOfVertices();
00266             filestr << offsets << std::endl;
00267         \}
00268     \}
00269     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00270 
00271     \textcolor{comment}{//  Types}
00272     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00273     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nCells ; ++i )
00274         filestr << \textcolor{stringliteral}{"7"} << std::endl;
00275     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00276 
00277     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00278 
00279     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00280     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00281     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00282 
00283     filestr.close();
00284 \}
00285 
00286 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
\hypertarget{ExportVTU_8hpp_source.tex_l00287}{}\hyperlink{classFVCode3D_1_1ExporterVTU_a476a1dd02bcba8c31f0d99c7106d0c21}{00287} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a476a1dd02bcba8c31f0d99c7106d0c21}{ExporterVTU::exportSolution}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} 
      std::string filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00288 \{
00289     std::fstream filestr;
00290 
00291     filestr.open (filename.c\_str(), std::ios\_base::out);
00292 
00293     \textcolor{keywordflow}{if} (filestr.is\_open())
00294     \{
00295         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00296     \}
00297     \textcolor{keywordflow}{else}
00298     \{
00299         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00300     \}
00301 
00302     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Solution in Vtu format... "} << std::endl;
00303 
00304     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00305     \textcolor{keyword}{const} std::vector<Facet> & facets = mesh.getFacetsVector();
00306     \textcolor{keyword}{const} std::vector<Cell> & cells = mesh.getCellsVector();
00307     \textcolor{keyword}{const} std::vector<Fracture\_Facet> & fractures = mesh.getFractureFacetsIdsVector();
00308     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00309     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nCells = cells.size();
00310     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFractures = mesh.getFractureFacetsIdsVector().size();
00311     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nTotal = nCells + nFractures;
00312     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0, faceOffsets = 0;
00313 
00314     \textcolor{comment}{// Header}
00315     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00316     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00317     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00318     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << nTotal << \textcolor{stringliteral}{"\(\backslash\)">"} << 
      std::endl;
00319 
00320     \textcolor{comment}{// CellData}
00321     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)">"} << std::endl;
00322     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00323     filestr << std::scientific << std::setprecision(10);
00324     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i = 0; i < nTotal; ++i )
00325         filestr << static\_cast<Real>(sol[i]) << std::endl;
00326     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00327     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00328 
00329     filestr << std::scientific << std::setprecision(10);
00330 
00331     \textcolor{comment}{// Points}
00332     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00333     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00334     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00335         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00336     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00337     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00338 
00339     \textcolor{comment}{// Cells}
00340     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00341     \textcolor{comment}{//  Connectivity}
00342     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00343     \textcolor{keywordflow}{for}( std::vector<Cell>::const\_iterator it = cells.begin(); it != cells.end(); ++it )
00344     \{
00345         \textcolor{keywordflow}{for}( std::vector<UInt>::const\_iterator jt = it->getVerticesIds().begin(); jt != it->getVerticesIds(
      ).end()-1; ++jt )
00346             filestr << *jt << \textcolor{stringliteral}{" "};
00347         filestr << *(it->getVerticesIds().rbegin()) << std::endl;
00348     \}
00349     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00350     \{
00351         \textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet}{Facet} & f = it->getFacet();
00352         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().begin(); jt != f.
      \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().end()-1; ++jt )
00353             filestr << *jt << \textcolor{stringliteral}{" "};
00354         filestr << *(f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().rbegin()) << std::endl;
00355     \}
00356     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00357 
00358     \textcolor{comment}{//  Offsets}
00359     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00360     \textcolor{keywordflow}{for}( std::vector<Cell>::const\_iterator it = cells.begin(); it != cells.end(); ++it )
00361     \{
00362         offsets += it->\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_a5d18db39a0eeb85e6a4afc2b09813201}{verticesNumber}();
00363         filestr << offsets << std::endl;
00364     \}
00365     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00366     \{
00367         offsets += it->getFacet().verticesNumber();
00368         filestr << offsets << std::endl;
00369     \}
00370     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00371 
00372     \textcolor{comment}{//  Types}
00373     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00374     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nTotal ; ++i )
00375         filestr << \textcolor{stringliteral}{"42"} << std::endl;
00376     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00377 
00378     \textcolor{comment}{//  Faces}
00379     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faces\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00380     \textcolor{keywordflow}{for}( std::vector<Cell>::const\_iterator it = cells.begin(); it != cells.end(); ++it )
00381     \{
00382         filestr << it->facetsNumber() << std::endl;
00383         \textcolor{keywordflow}{for}( std::vector<UInt>::const\_iterator jt = it->getFacetsIds().begin(); jt != it->getFacetsIds().
      end(); ++jt )
00384         \{
00385             filestr << facets[*jt].verticesNumber() << std::endl;
00386             \textcolor{keywordflow}{for}( std::vector<UInt>::const\_iterator kt = facets[*jt].getVerticesIds().
      \hyperlink{namespacestd_acec9a198880c12f51f02be95a298a48b}{begin}(); kt != facets[*jt].getVerticesIds().end()-1; ++kt )
00387                 filestr << *kt << \textcolor{stringliteral}{" "};
00388             filestr << *(facets[*jt].getVerticesIds().rbegin()) << std::endl;
00389         \}
00390     \}
00391     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00392     \{
00393         filestr << \textcolor{stringliteral}{"1"} << std::endl;
00394         filestr << facets[it->getId()].verticesNumber() << std::endl;
00395         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = facets[it->getId()].getVerticesIds().begin(); jt != 
      facets[it->getId()].getVerticesIds().end()-1; ++jt )
00396             filestr << *jt << \textcolor{stringliteral}{" "};
00397         filestr << *(facets[it->getId()].getVerticesIds().rbegin()) << std::endl;
00398     \}
00399     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00400 
00401     \textcolor{comment}{//  Faceoffsets}
00402     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faceoffsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00403     \textcolor{keywordflow}{for}( std::vector<Cell>::const\_iterator it = cells.begin(); it != cells.end(); ++it )
00404     \{
00405         faceOffsets += 1 + it->facetsNumber();
00406         \textcolor{keywordflow}{for}( std::vector<UInt>::const\_iterator jt = it->getFacetsIds().begin(); jt != it->getFacetsIds().
      end(); ++jt )
00407             faceOffsets += facets[*jt].verticesNumber();
00408         filestr << faceOffsets << std::endl;
00409     \}
00410     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00411     \{
00412         faceOffsets += 2 + facets[it->getId()].verticesNumber();
00413         filestr << faceOffsets << std::endl;
00414     \}
00415     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00416     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00417 
00418     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00419     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00420     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00421 
00422     filestr.close();
00423 \}
00424 
00425 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00426 \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{ExporterVTU::}
\hypertarget{ExportVTU_8hpp_source.tex_l00427}{}\hyperlink{classFVCode3D_1_1ExporterVTU_a2ebc29ace371341054f8780eba24d644}{00427} \hyperlink{classFVCode3D_1_1ExporterVTU_abc88a5113c02b55942862ef39b30ec80}{exportSolutionOnFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string 
      filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00428 \{
00429     std::fstream filestr;
00430 
00431     filestr.open (filename.c\_str(), std::ios\_base::out);
00432 
00433     \textcolor{keywordflow}{if} (filestr.is\_open())
00434     \{
00435         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00436     \}
00437     \textcolor{keywordflow}{else}
00438     \{
00439         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00440     \}
00441 
00442     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Solution on Fractures in Vtu format... "} << std::endl;
00443 
00444     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00445     \textcolor{keyword}{const} std::vector<Facet> & facets = mesh.getFacetsVector();
00446     \textcolor{keyword}{const} std::vector<Cell> & cells = mesh.getCellsVector();
00447     \textcolor{keyword}{const} std::vector<Fracture\_Facet> & fractures = mesh.getFractureFacetsIdsVector();
00448     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00449     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nCells = cells.size();
00450     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFractures = mesh.getFractureFacetsIdsVector().size();
00451     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nTotal = nCells + nFractures;
00452     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0, faceOffsets = 0;
00453 
00454     \textcolor{comment}{// Header}
00455     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00456     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00457     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00458     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << nFractures << \textcolor{stringliteral}{"\(\backslash\)">"} <<
       std::endl;
00459 
00460     \textcolor{comment}{// CellData}
00461     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)">"} << std::endl;
00462     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00463     filestr << std::scientific << std::setprecision(10);
00464     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i = nCells; i < nTotal; ++i )
00465         filestr << static\_cast<Real>(sol[i]) << std::endl;
00466     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00467     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00468 
00469     filestr << std::scientific << std::setprecision(10);
00470 
00471     \textcolor{comment}{// Points}
00472     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00473     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00474     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00475         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00476     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00477     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00478 
00479     \textcolor{comment}{// Cells}
00480     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00481     \textcolor{comment}{//  Connectivity}
00482     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00483     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00484     \{
00485         \textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet}{Facet} & f = it->getFacet();
00486         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().begin(); jt != f.
      \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().end()-1; ++jt )
00487             filestr << *jt << \textcolor{stringliteral}{" "};
00488         filestr << *(f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().rbegin()) << std::endl;
00489     \}
00490     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00491 
00492     \textcolor{comment}{//  Offsets}
00493     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00494     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00495     \{
00496         offsets += it->getFacet().\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_a5d18db39a0eeb85e6a4afc2b09813201}{verticesNumber}();
00497         filestr << offsets << std::endl;
00498     \}
00499     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00500 
00501     \textcolor{comment}{//  Types}
00502     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00503     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nFractures ; ++i )
00504         filestr << \textcolor{stringliteral}{"42"} << std::endl;
00505     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00506 
00507     \textcolor{comment}{//  Faces}
00508     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faces\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00509     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00510     \{
00511         filestr << \textcolor{stringliteral}{"1"} << std::endl;
00512         filestr << facets[it->getId()].verticesNumber() << std::endl;
00513         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = facets[it->getId()].getVerticesIds().begin(); jt != 
      facets[it->getId()].getVerticesIds().end()-1; ++jt )
00514             filestr << *jt << \textcolor{stringliteral}{" "};
00515         filestr << *(facets[it->getId()].getVerticesIds().rbegin()) << std::endl;
00516     \}
00517     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00518 
00519     \textcolor{comment}{//  Faceoffsets}
00520     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faceoffsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00521     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00522     \{
00523         faceOffsets += 2 + facets[it->getId()].verticesNumber();
00524         filestr << faceOffsets << std::endl;
00525     \}
00526     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00527     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00528 
00529     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00530     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00531     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00532 
00533     filestr.close();
00534 \}
00535 
00536 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
\hypertarget{ExportVTU_8hpp_source.tex_l00537}{}\hyperlink{classFVCode3D_1_1ExporterVTU_a3dd6650210988750d8c057f68a0f016d}{00537} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a3dd6650210988750d8c057f68a0f016d}{ExporterVTU::exportSolutionOnFacets}(\textcolor{keyword}{const} 
      \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{const} VectorType & sol, \textcolor{keyword}{const} std::string & 
      fieldName ) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00538 \{
00539     std::fstream filestr;
00540 
00541     filestr.open (filename.c\_str(), std::ios\_base::out);
00542 
00543     \textcolor{keywordflow}{if} (filestr.is\_open())
00544     \{
00545         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00546     \}
00547     \textcolor{keywordflow}{else}
00548     \{
00549         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00550     \}
00551 
00552     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Facets in Vtu format... "} << std::endl;
00553 
00554     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00555     \textcolor{keyword}{const} std::vector<Facet> & facets = mesh.getFacetsVector();
00556     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00557     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFacets = facets.size();
00558     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0;
00559 
00560     \textcolor{comment}{// Header}
00561     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00562     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00563     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00564     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << nFacets << \textcolor{stringliteral}{"\(\backslash\)">"} << 
      std::endl;
00565 
00566     \textcolor{comment}{// CellData}
00567     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)"facetId\(\backslash\)">"} << std::endl;
00568 
00569     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"facetId\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00570     filestr << std::scientific << std::setprecision(10);
00571     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00572         filestr << facet\_it.getId() << std::endl;
00573     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00574 
00575     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"borderId\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00576     filestr << std::scientific << std::setprecision(10);
00577     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00578         filestr << facet\_it.getBorderId() << std::endl;
00579     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00580 
00581     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00582 
00583     \textcolor{comment}{// CellData}
00584     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)">"} << std::endl;
00585     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""}<< fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00586     filestr << std::scientific << std::setprecision(16);
00587     \textcolor{keywordflow}{for}( \textcolor{keyword}{auto}& facet\_it : facets )
00588         filestr << static\_cast<Real>(sol[ facet\_it.getId() ]) << std::endl;
00589     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00590     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00591 
00592     filestr << std::scientific << std::setprecision(10);
00593 
00594     \textcolor{comment}{// Points}
00595     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00596     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00597     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00598         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00599     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00600     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00601 
00602     \textcolor{comment}{// Cells}
00603     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00604     \textcolor{comment}{//  Connectivity}
00605     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00606     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00607     \{
00608         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} vertex\_it : facet\_it.getVerticesIds())
00609             filestr << vertex\_it << \textcolor{stringliteral}{" "};
00610         filestr << std::endl;
00611     \}
00612     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00613 
00614     \textcolor{comment}{//  Offsets}
00615     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00616     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00617     \{
00618         offsets += facet\_it.verticesNumber();
00619         filestr << offsets << std::endl;
00620     \}
00621     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00622 
00623     \textcolor{comment}{//  Types}
00624     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00625     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nFacets ; ++i)
00626         filestr << \textcolor{stringliteral}{"7"} << std::endl;
00627     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00628 
00629     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00630 
00631     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00632     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00633     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00634 
00635     filestr.close();
00636 \} \textcolor{comment}{// ExporterVTU::exportSolutionOnFacets}
00637 
00638 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00639 \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a8e6ee7a5a2bede11d9671d37e78651a4}{ExporterVTU::}
\hypertarget{ExportVTU_8hpp_source.tex_l00640}{}\hyperlink{classFVCode3D_1_1ExporterVTU_a8e6ee7a5a2bede11d9671d37e78651a4}{00640} \hyperlink{classFVCode3D_1_1ExporterVTU_a8e6ee7a5a2bede11d9671d37e78651a4}{exportFlux}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{const} VectorType & sol,
       \textcolor{keyword}{const} std::string & fieldName) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00641 \{
00642     std::fstream filestr;
00643 
00644     filestr.open (filename.c\_str(), std::ios\_base::out);
00645 
00646     \textcolor{keywordflow}{if} (filestr.is\_open())
00647     \{
00648         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00649     \}
00650     \textcolor{keywordflow}{else}
00651     \{
00652         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00653     \}
00654 
00655     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Flux in Vtu format... "} << std::endl;
00656 
00657     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00658     \textcolor{keyword}{const} std::vector<Facet> & facets = mesh.getFacetsVector();
00659     \textcolor{keyword}{const} std::vector<Fracture\_Facet> & fractures = mesh.getFractureFacetsIdsVector();
00660     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00661     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFacets = facets.size();
00662     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFractures = mesh.getFractureFacetsIdsVector().size();
00663     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nTotal = nFacets + nFractures;
00664     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0, faceOffsets = 0;
00665 
00666     \textcolor{comment}{// Header}
00667     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00668     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00669     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00670     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << nTotal << \textcolor{stringliteral}{"\(\backslash\)">"} << 
      std::endl;
00671 
00672     \textcolor{comment}{// CellData}
00673     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)"Flux\(\backslash\)">"} << std::endl;
00674     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""} << fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00675     filestr << std::scientific << std::setprecision(10);
00676     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i = 0; i < nTotal; ++i )
00677         filestr << sol[i] << std::endl;
00678     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00679     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00680 
00681     filestr << std::scientific << std::setprecision(10);
00682 
00683     \textcolor{comment}{// Points}
00684     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00685     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00686     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00687         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00688     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00689     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00690 
00691     \textcolor{comment}{// Cells}
00692     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00693     \textcolor{comment}{//  Connectivity}
00694     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00695     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00696     \{
00697         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} vertex\_it : facet\_it.getVerticesIds())
00698             filestr << vertex\_it << \textcolor{stringliteral}{" "};
00699         filestr << std::endl;
00700     \}
00701     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00702 
00703     \textcolor{comment}{//  Offsets}
00704     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00705     \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}& facet\_it : facets)
00706     \{
00707         offsets += facet\_it.verticesNumber();
00708         filestr << offsets << std::endl;
00709     \}
00710     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00711 
00712     \textcolor{comment}{//  Types}
00713     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00714     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nTotal ; ++i )
00715         filestr << \textcolor{stringliteral}{"42"} << std::endl;
00716     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00717 
00718     \textcolor{comment}{//  Faces}
00719     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faces\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00720     \textcolor{keywordflow}{for}( std::vector<Facet>::const\_iterator it = facets.begin(); it != facets.end(); ++it )
00721     \{
00722         filestr << \textcolor{stringliteral}{"1"} << std::endl;
00723         filestr << it->verticesNumber() << std::endl;
00724         \textcolor{keywordflow}{for}( std::vector<UInt>::const\_iterator jt = it->getVerticesIds().begin(); jt != it->getVerticesIds(
      ).end()-1; ++jt )
00725             filestr << *jt << \textcolor{stringliteral}{" "};
00726         filestr << *(it->getVerticesIds().rbegin()) << std::endl;
00727     \}
00728     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00729     \{
00730         filestr << \textcolor{stringliteral}{"1"} << std::endl;
00731         filestr << facets[it->getId()].verticesNumber() << std::endl;
00732         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = facets[it->getId()].getVerticesIds().begin(); jt !=
00733             facets[it->getId()].getVerticesIds().end()-1; ++jt )
00734             filestr << *jt << \textcolor{stringliteral}{" "};
00735         filestr << *(facets[it->getId()].getVerticesIds().rbegin()) << std::endl;
00736     \}
00737     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00738 
00739     \textcolor{comment}{//  Faceoffsets}
00740     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faceoffsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00741     \textcolor{keywordflow}{for}( std::vector<Facet>::const\_iterator it = facets.begin(); it != facets.end(); ++it )
00742     \{
00743         faceOffsets += 2 + it->verticesNumber();
00744         filestr << faceOffsets << std::endl;
00745     \}
00746     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00747     \{
00748         faceOffsets += 2 + facets[it->getId()].verticesNumber();
00749         filestr << faceOffsets << std::endl;
00750     \}
00751     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00752     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00753 
00754     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00755     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00756     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00757 
00758     filestr.close();
00759 \}
00760 
00761 \textcolor{keyword}{template} <\textcolor{keyword}{typename} VectorType>
00762 \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1ExporterVTU_a1bca940b11053faa1a928bf3b19709af}{ExporterVTU::}
\hypertarget{ExportVTU_8hpp_source.tex_l00763}{}\hyperlink{classFVCode3D_1_1ExporterVTU_a1bca940b11053faa1a928bf3b19709af}{00763} \hyperlink{classFVCode3D_1_1ExporterVTU_a1bca940b11053faa1a928bf3b19709af}{exportFluxOnFractures}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh}{Rigid\_Mesh} & mesh, \textcolor{keyword}{const} std::string filename, \textcolor{keyword}{
      const} VectorType & sol, \textcolor{keyword}{const} std::string & fieldName) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00764 \{
00765     std::fstream filestr;
00766 
00767     filestr.open (filename.c\_str(), std::ios\_base::out);
00768 
00769     \textcolor{keywordflow}{if} (filestr.is\_open())
00770     \{
00771         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00772     \}
00773     \textcolor{keywordflow}{else}
00774     \{
00775         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00776     \}
00777 
00778     std::cout << std::endl << \textcolor{stringliteral}{" Exporting Flux on Fractures in Vtu format... "} << std::endl;
00779 
00780     \textcolor{keyword}{const} std::vector<Point3D> & nodes = mesh.getNodesVector();
00781     \textcolor{keyword}{const} std::vector<Facet> & facets = mesh.getFacetsVector();
00782     \textcolor{keyword}{const} std::vector<Fracture\_Facet> & fractures = mesh.getFractureFacetsIdsVector();
00783     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00784     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFacets = facets.size();
00785     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFractures = mesh.getFractureFacetsIdsVector().size();
00786     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nTotal = nFacets + nFractures;
00787     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} offsets = 0, faceOffsets = 0;
00788 
00789     \textcolor{comment}{// Header}
00790     filestr << \textcolor{stringliteral}{"<?xml version=\(\backslash\)"1.0\(\backslash\)"?>"} << std::endl;
00791     filestr << \textcolor{stringliteral}{"<VTKFile type=\(\backslash\)"UnstructuredGrid\(\backslash\)" version=\(\backslash\)"0.1\(\backslash\)" byte\_order=\(\backslash\)"LittleEndian\(\backslash\)" compressor=
      \(\backslash\)"vtkZLibDataCompressor\(\backslash\)">"} << std::endl;
00792     filestr << \textcolor{stringliteral}{"\(\backslash\)t<UnstructuredGrid>"} << std::endl;
00793     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t<Piece NumberOfPoints=\(\backslash\)""} << nPoints << \textcolor{stringliteral}{"\(\backslash\)" NumberOfCells=\(\backslash\)""} << 2*nFractures << \textcolor{stringliteral}{"\(\backslash\)">"} 
      << std::endl;
00794 
00795     \textcolor{comment}{// CellData}
00796     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<CellData Scalars=\(\backslash\)"Flux\(\backslash\)">"} << std::endl;
00797     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)""} << fieldName << \textcolor{stringliteral}{"\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << 
      std::endl;
00798     filestr << std::scientific << std::setprecision(10);
00799     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i = 0; i < 2*nFractures; ++i )
00800         filestr << sol[i] << std::endl;
00801     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00802     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</CellData>"} << std::endl;
00803 
00804     filestr << std::scientific << std::setprecision(10);
00805 
00806     \textcolor{comment}{// Points}
00807     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Points>"} << std::endl;
00808     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Float32\(\backslash\)" Name=\(\backslash\)"Points\(\backslash\)" NumberOfComponents=\(\backslash\)"3\(\backslash\)" format=\(\backslash\)"ascii
      \(\backslash\)">"} << std::endl;
00809     \textcolor{keywordflow}{for}( std::vector<Point3D>::const\_iterator it = nodes.begin(); it != nodes.end(); ++it )
00810         filestr << it->x() << \textcolor{stringliteral}{" "} << it->y() << \textcolor{stringliteral}{" "} << it->z() <<std::endl;
00811     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00812     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Points>"} << std::endl;
00813 
00814     \textcolor{comment}{// Cells}
00815     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t<Cells>"} << std::endl;
00816     \textcolor{comment}{//  Connectivity}
00817     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"connectivity\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00818     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00819     \{
00820         \textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet}{Facet} & f = it->getFacet();
00821         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().begin(); jt != f.
      \hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().end()-1; ++jt )
00822             filestr << *jt << \textcolor{stringliteral}{" "};
00823         filestr << *(f.\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_af92ad0b6b79c69f6c04584301b8998a7}{getVerticesIds}().rbegin()) << std::endl;
00824     \}
00825     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00826 
00827     \textcolor{comment}{//  Offsets}
00828     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"offsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00829     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00830     \{
00831         offsets += it->getFacet().\hyperlink{classFVCode3D_1_1Rigid__Mesh_1_1Facet_a5d18db39a0eeb85e6a4afc2b09813201}{verticesNumber}();
00832         filestr << offsets << std::endl;
00833     \}
00834     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00835 
00836     \textcolor{comment}{//  Types}
00837     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"UInt8\(\backslash\)" Name=\(\backslash\)"types\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00838     \textcolor{keywordflow}{for}( \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < 2*nFractures ; ++i )
00839         filestr << \textcolor{stringliteral}{"42"} << std::endl;
00840     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00841 
00842     \textcolor{comment}{//  Faces}
00843     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faces\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00844     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00845     \{
00846         filestr << \textcolor{stringliteral}{"1"} << std::endl;
00847         filestr << facets[it->getId()].verticesNumber() << std::endl;
00848         \textcolor{keywordflow}{for}(std::vector<UInt>::const\_iterator jt = facets[it->getId()].getVerticesIds().begin(); jt !=
00849             facets[it->getId()].getVerticesIds().end()-1; ++jt )
00850             filestr << *jt << \textcolor{stringliteral}{" "};
00851         filestr << *(facets[it->getId()].getVerticesIds().rbegin()) << std::endl;
00852     \}
00853     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00854 
00855     \textcolor{comment}{//  Faceoffsets}
00856     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t<DataArray type=\(\backslash\)"Int64\(\backslash\)" Name=\(\backslash\)"faceoffsets\(\backslash\)" format=\(\backslash\)"ascii\(\backslash\)">"} << std::endl;
00857     \textcolor{keywordflow}{for}(std::vector<Fracture\_Facet>::const\_iterator it = fractures.begin(); it != fractures.end(); ++it )
00858     \{
00859         faceOffsets += 2 + facets[it->getId()].verticesNumber();
00860         filestr << faceOffsets << std::endl;
00861     \}
00862     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t\(\backslash\)t</DataArray>"} << std::endl;
00863     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t\(\backslash\)t</Cells>"} << std::endl;
00864 
00865     filestr << \textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)t</Piece>"} << std::endl;
00866     filestr << \textcolor{stringliteral}{"\(\backslash\)t</UnstructuredGrid>"} << std::endl;
00867     filestr << \textcolor{stringliteral}{"\(\backslash\)t</VTKFile>"} << std::endl;
00868 
00869     filestr.close();
00870 \}
00871 
00872 \} \textcolor{comment}{// namespace FVCode3D}
00873 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* EXPORTVTU\_HPP\_ */}\textcolor{preprocessor}{}
\end{DoxyCode}
