\hypertarget{Fracture3D_8cpp_source}{}\section{Fracture3\+D.\+cpp}
\label{Fracture3D_8cpp_source}\index{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/fracture/\+Fracture3\+D.\+cpp@{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/fracture/\+Fracture3\+D.\+cpp}}

\begin{DoxyCode}
00001 
00006 \textcolor{preprocessor}{#include <\hyperlink{Fracture3D_8hpp}{FVCode3D/fracture/Fracture3D.hpp}>}
00007 \textcolor{preprocessor}{#include <\hyperlink{Mesh3D_8hpp}{FVCode3D/mesh/Mesh3D.hpp}>}
00008 
00009 \textcolor{keyword}{namespace }\hyperlink{namespaceFVCode3D}{FVCode3D}
00010 \{
00011 
\hypertarget{Fracture3D_8cpp_source.tex_l00012}{}\hyperlink{classFVCode3D_1_1Fracture3D_a71eac02a97fa86896ae0a779fa581d03}{00012} \hyperlink{classFVCode3D_1_1Fracture3D_a71eac02a97fa86896ae0a779fa581d03}{Fracture3D::Fracture3D}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh):
00013     M\_id(0), M\_mesh(mesh) \{\}
00014 
\hypertarget{Fracture3D_8cpp_source.tex_l00015}{}\hyperlink{classFVCode3D_1_1Fracture3D_a4babeb6bfab2f22db8e33ff510d57d6b}{00015} \hyperlink{classFVCode3D_1_1Fracture3D_a71eac02a97fa86896ae0a779fa581d03}{Fracture3D::Fracture3D}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Fracture3D}{Fracture3D} & f):
00016     \hyperlink{classFVCode3D_1_1Fracture3D_a38b5200e499e51977db8f816a95eccd9}{M\_id}(f.\hyperlink{classFVCode3D_1_1Fracture3D_acf744c39ce0958b84a2ce9c09d314ec4}{getId}()), \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}(f.
      \hyperlink{classFVCode3D_1_1Fracture3D_af63aa07d454891f7edaa087ade1c2135}{getFractureFacetsId}()), \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}(f.\hyperlink{classFVCode3D_1_1Fracture3D_abfb272291358decd4671bea92f219d0a}{getMesh}()) \{\}
00017 
\hypertarget{Fracture3D_8cpp_source.tex_l00018}{}\hyperlink{classFVCode3D_1_1Fracture3D_a998dc24389a5b6c6776b9e7a05db0b61}{00018} \hyperlink{classFVCode3D_1_1Fracture3D_a71eac02a97fa86896ae0a779fa581d03}{Fracture3D::Fracture3D}(\textcolor{keyword}{const} \hyperlink{classFVCode3D_1_1Mesh3D}{Mesh3D} & mesh, \textcolor{keyword}{const} std::vector<UInt> & 
      fractureFacets, \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \textcolor{keywordtype}{id}):
00019     \hyperlink{classFVCode3D_1_1Fracture3D_a38b5200e499e51977db8f816a95eccd9}{M\_id}(id), \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}(fractureFacets), \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}(mesh) \{\}
00020 
\hypertarget{Fracture3D_8cpp_source.tex_l00021}{}\hyperlink{classFVCode3D_1_1Fracture3D_a1043c8fc93b79a1cea8d67d8adb2a418}{00021} \textcolor{keywordtype}{bool} \hyperlink{classFVCode3D_1_1Fracture3D_a1043c8fc93b79a1cea8d67d8adb2a418}{Fracture3D::exportVTK}(\textcolor{keyword}{const} std::string & filename) \textcolor{keyword}{const} \textcolor{keywordflow}{throw}()
00022 \{
00023     \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nFaces = \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}.size();
00024     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} totalNodes = 0;
00025     std::set<UInt> nodes;
00026 
00027     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nFaces; ++i)
00028     \{
00029         totalNodes += (\hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a76de387da2a552e3e1210d795bc7acf9}{getFacetsMap}()).at(
      \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i]).getNumberOfVertices();
00030         nodes.insert( \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a76de387da2a552e3e1210d795bc7acf9}{getFacetsMap}().at(
      \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i]).getVerticesVector().begin(), \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.
      \hyperlink{classFVCode3D_1_1Mesh3D_a76de387da2a552e3e1210d795bc7acf9}{getFacetsMap}().at(\hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i]).getVerticesVector().end() );
00031         \textcolor{comment}{//std::copy( M\_mesh.getFacetsMap().at(M\_fractureFacets[i]).getVerticesVector().begin(),
       M\_mesh.getFacetsMap().at(M\_fractureFacets[i]).getVerticesVector().end(),}
00032         \textcolor{comment}{//      std::inserter( nodes, nodes.end() ) );}
00033     \}
00034 
00035     std::ofstream filestr;
00036 
00037     filestr.open (filename.c\_str(), std::ios\_base::out | std::ios\_base::app);
00038 
00039     \textcolor{keywordflow}{if} (filestr.is\_open())
00040     \{
00041         std::cout << std::endl << \textcolor{stringliteral}{" File: "} << filename << \textcolor{stringliteral}{", successfully opened"};
00042     \}
00043     \textcolor{keywordflow}{else}
00044     \{
00045         \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Error: file "} + filename + \textcolor{stringliteral}{" not opened."});
00046     \}
00047 
00048     std::cout << std::endl
00049               << \textcolor{stringliteral}{" Exporting Fracture3D discretization in Vtk format... "} << std::endl;
00050 
00051     \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nPoints = nodes.size();
00052     \textcolor{keyword}{const} \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} CellType = 7; \textcolor{comment}{// for VTK\_POLYGON}
00053     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} nNodesFacet;
00054 
00055     \textcolor{comment}{// Header}
00056     filestr << \textcolor{stringliteral}{"# vtk DataFile Version 3.1"} << std::endl;
00057     filestr << \textcolor{stringliteral}{"this is a file created for Paraview"} << std::endl;
00058     filestr << \textcolor{stringliteral}{"ASCII"} << std::endl;
00059     filestr << \textcolor{stringliteral}{"DATASET UNSTRUCTURED\_GRID"} << std::endl;
00060     filestr << std::endl;   \textcolor{comment}{// The fifth line is empty.}
00061 
00062     filestr << std::scientific << std::setprecision(10);
00063 
00064     \textcolor{comment}{// Pointdata}
00065     filestr << \textcolor{stringliteral}{"POINTS "} << nPoints << \textcolor{stringliteral}{" double"} << std::endl;
00066     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nPoints; ++i)
00067         filestr << \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a04162ec60e0fe52674b3ecbb7de1185c}{getNodesVector}()[i].x() << \textcolor{stringliteral}{" "} << 
      \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a04162ec60e0fe52674b3ecbb7de1185c}{getNodesVector}()[i].y() << \textcolor{stringliteral}{" "} << \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.
      \hyperlink{classFVCode3D_1_1Mesh3D_a04162ec60e0fe52674b3ecbb7de1185c}{getNodesVector}()[i].z() << std::endl;
00068     filestr << std::endl;
00069 
00070     \textcolor{comment}{// Celldata}
00071     filestr << \textcolor{stringliteral}{"CELLS "} << nFaces << \textcolor{stringliteral}{" "} << totalNodes + nFaces << std::endl;
00072     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i<nFaces; ++i)\{
00073         nNodesFacet = \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a76de387da2a552e3e1210d795bc7acf9}{getFacetsMap}().at(
      \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i]).getNumberOfVertices();
00074         filestr << nNodesFacet;
00075         \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} j=0; j < nNodesFacet; ++j)
00076             filestr << \hyperlink{classFVCode3D_1_1Fracture3D_ab3ceda8a7f2e67ee5d94a08be2ba2977}{M\_mesh}.\hyperlink{classFVCode3D_1_1Mesh3D_a76de387da2a552e3e1210d795bc7acf9}{getFacetsMap}().at(
      \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i]).getVerticesVector()[j];
00077         filestr << std::endl;
00078     \}
00079     filestr << std::endl;
00080 
00081     \textcolor{comment}{// Celltype}
00082     filestr << \textcolor{stringliteral}{"CELL\_TYPES "} << nFaces << std::endl;
00083     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < nFaces; ++i)
00084         filestr << CellType << std::endl;
00085     filestr << std::endl;
00086 
00087     filestr.close();
00088 
00089     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00090 \}
00091 
\hypertarget{Fracture3D_8cpp_source.tex_l00092}{}\hyperlink{classFVCode3D_1_1Fracture3D_a35cf7c9104e494422e41a87faae74d65}{00092} \textcolor{keywordtype}{void} \hyperlink{classFVCode3D_1_1Fracture3D_a35cf7c9104e494422e41a87faae74d65}{Fracture3D::showMe}(std::ostream & out)\textcolor{keyword}{ const}
00093 \textcolor{keyword}{}\{
00094     out << \textcolor{stringliteral}{"Type = Fracture3D "} << std::endl;
00095     out << \textcolor{stringliteral}{" M\_fractureFacets :"} << std::endl;
00096     out << \textcolor{stringliteral}{" [ "};
00097     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} i=0; i < \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}.size()-1 ; ++i)
00098         out << \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[i] << \textcolor{stringliteral}{" , "};
00099     out << \hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}[\hyperlink{classFVCode3D_1_1Fracture3D_ab2da921dc007666c4f9111b3204f0072}{M\_fractureFacets}.size() - 1] << \textcolor{stringliteral}{" ] "} << 
      std::endl;
00100     out << \textcolor{stringliteral}{" Physical Properties : "} << std::endl;
00101 \}
00102 
00103 \} \textcolor{comment}{// namespace FVCode3D}
\end{DoxyCode}
