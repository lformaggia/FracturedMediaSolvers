\hypertarget{SparseBlock_8cpp_source}{}\section{Sparse\+Block.\+cpp}
\label{SparseBlock_8cpp_source}\index{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/eigen\+Patch/\+Sparse\+Block.\+cpp@{/home/corinne/eni\+Reservoir\+G\+I\+T\+H\+U\+B/eni\+Reservoir/\+F\+V\+Code3\+D/src/\+F\+V\+Code3\+D/eigen\+Patch/\+Sparse\+Block.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include <\hyperlink{SparseBlock_8hpp}{FVCode3D/eigenPatch/SparseBlock.hpp}>}
00002 
00003 \textcolor{keyword}{namespace }\hyperlink{namespaceFVCode3D}{FVCode3D}
00004 \{
00005 
\hypertarget{SparseBlock_8cpp_source.tex_l00006}{}\hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{00006} \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{sparseBlock}(\hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \_matrix, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_ibegin, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jbegin, 
      \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_icount, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jcount)
00007 \{
00008     assert( \textcolor{keywordtype}{int}(\_ibegin + \_icount) <= \_matrix.rows() );
00009     assert( \textcolor{keywordtype}{int}(\_jbegin + \_jcount) <= \_matrix.cols() );
00010 
00011     \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} Mj, Mi, i, currOuterIndex, nextOuterIndex;
00012     std::vector<Triplet> tripletList;
00013     tripletList.reserve(\_matrix.nonZeros());
00014 
00015     \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} j = 0; j < \_jcount; j++)
00016     \{
00017         Mj = j + \_jbegin;
00018         currOuterIndex = \_matrix.outerIndexPtr()[Mj];
00019         nextOuterIndex = \_matrix.outerIndexPtr()[Mj+1];
00020 
00021         \textcolor{keywordflow}{for}(\hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} a = currOuterIndex; a < nextOuterIndex; a++)
00022         \{
00023             Mi = \_matrix.innerIndexPtr()[a];
00024 
00025             \textcolor{keywordflow}{if}(Mi < \_ibegin)
00026             \{
00027                 \textcolor{keywordflow}{continue};
00028             \}
00029             \textcolor{keywordflow}{if}(Mi >= \_ibegin + \_icount)
00030             \{
00031                 \textcolor{keywordflow}{break};
00032             \}
00033 
00034             i = Mi - \_ibegin;
00035             tripletList.emplace\_back( i, j, \_matrix.valuePtr()[a] ); \textcolor{comment}{// Triplet}
00036         \}
00037     \}
00038     \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} matS(\_icount, \_jcount);
00039     matS.setFromTriplets( \hyperlink{namespacestd_acec9a198880c12f51f02be95a298a48b}{std::begin}( tripletList ), \hyperlink{namespacestd_aeb4b319cf9afda99ba1f47d32df15bc9}{std::end}( tripletList ) );
00040     \textcolor{keywordflow}{return} matS;
00041 \}
00042 
\hypertarget{SparseBlock_8cpp_source.tex_l00043}{}\hyperlink{namespaceFVCode3D_a13bcca787028985b3fdbca71334eb63f}{00043} \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \hyperlink{namespaceFVCode3D_a13bcca787028985b3fdbca71334eb63f}{sparseTopLeftBlock}(\hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \_matrix, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_icount, 
      \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jcount)
00044 \{
00045     \textcolor{keywordflow}{return} \hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{sparseBlock}( \_matrix, 0, 0, \_icount, \_jcount );
00046 \}
00047 
\hypertarget{SparseBlock_8cpp_source.tex_l00048}{}\hyperlink{namespaceFVCode3D_a4e9be96975d446ebb5e3acd53150bbbb}{00048} \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \hyperlink{namespaceFVCode3D_a4e9be96975d446ebb5e3acd53150bbbb}{sparseTopRightBlock}(\hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \_matrix, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_icount, 
      \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jcount)
00049 \{
00050     \textcolor{keywordflow}{return} \hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{sparseBlock}( \_matrix, 0, \_matrix.cols()-\_jcount, \_icount, \_jcount );
00051 \}
00052 
\hypertarget{SparseBlock_8cpp_source.tex_l00053}{}\hyperlink{namespaceFVCode3D_a2b06bf4215f4ce6cbd1a940fbd2ef6e6}{00053} \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \hyperlink{namespaceFVCode3D_a2b06bf4215f4ce6cbd1a940fbd2ef6e6}{sparseBottomLeftBlock}(\hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \_matrix, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_icount, 
      \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jcount)
00054 \{
00055     \textcolor{keywordflow}{return} \hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{sparseBlock}( \_matrix, \_matrix.rows() - \_icount, 0, \_icount, \_jcount );
00056 \}
00057 
\hypertarget{SparseBlock_8cpp_source.tex_l00058}{}\hyperlink{namespaceFVCode3D_a2468aefbc3231765755c7316f146bc3d}{00058} \hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \hyperlink{namespaceFVCode3D_a2468aefbc3231765755c7316f146bc3d}{sparseBottomRightBlock}(\hyperlink{namespaceFVCode3D_ac1032289d96638cf0ad6c52ef639095f}{SpMat} \_matrix, \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_icount, 
      \hyperlink{namespaceFVCode3D_a4bf7e328c75d0fd504050d040ebe9eda}{UInt} \_jcount)
00059 \{
00060     \textcolor{keywordflow}{return} \hyperlink{namespaceFVCode3D_a50584b1c52af8d3b79fe5b0bcc18b2e1}{sparseBlock}( \_matrix, \_matrix.rows() - \_icount, \_matrix.cols() - \_jcount, \_icount, 
      \_jcount );
00061 \}
00062 
00063 \} \textcolor{comment}{// namespace FVCode3D}
\end{DoxyCode}
