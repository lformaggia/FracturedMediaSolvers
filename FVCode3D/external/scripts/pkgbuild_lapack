#! /bin/bash

ver='3.5.0'

download_lapack() {
    if [ -f ${PACKAGE_SRC_DIR}/lapack-${ver}.tgz ]; then
        cp ${PACKAGE_SRC_DIR}/lapack-${ver}.tgz ${src_dir}
    else
        wget -nv "http://www.netlib.org/lapack/lapack-${ver}.tgz"
    fi
}

unpack_lapack() {
    tar xzf lapack-${ver}.tgz
}

build_lapack() {
    mkdir -p ${build_dir}

    CMAKE_BIN=cmake
    if [ -n "${cmake_install_dir}" ]; then
        CMAKE_BIN="${cmake_install_dir}/bin/cmake"
    fi

    cd ${build_dir}
    ${CMAKE_BIN} \
        -DCMAKE_BUILD_TYPE=Release \
        -DBUILD_SHARED_LIBS=ON \
        -DUSE_OPTIMIZED_BLAS:BOOL=ON \
        -DCMAKE_PREFIX_PATH:PATH=${blas_install_dir} \
        -DCMAKE_INSTALL_PREFIX:PATH=${install_dir} \
        ${src_dir}/lapack-${ver}
 
    make -j$NUM_PROC
}

install_lapack() {
    make install
}


